const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["MnemonicDisplay.js","index.js","index.css","Dialog.js","index2.js","x.js","arrow-right.js"])))=>i.map(i=>d[i]);
import{z as h,o as b,u as N,j as s,A as F,C as g,d as y,e as A,g as v,h as E,B as x,r as d,D as T,R as _,x as M,_ as R}from"./index.js";import{u as z,F as D,a as p,b as j,c as w,I as f,d as C,e as S,t as H}from"./zod.js";import{L as k}from"./loader.js";import{P as B}from"./plus.js";import{S as L}from"./stringUtil.js";import{C as O}from"./copy.js";import{C as V}from"./check.js";const I=h.object({password:h.string().min(8,"Password must be atleast 8 characters"),reEnteredPassword:h.string().min(8,"Password must be atleast 8 characters")}).refine(t=>t.password===t.reEnteredPassword,{message:"Passwords doesn't match",path:["reEnteredPassword"]}),$=b(({onAccountCreated:t})=>{const{zondStore:i}=N(),{zondInstance:o}=i,l=z({resolver:H(I),mode:"onChange",reValidateMode:"onSubmit",defaultValues:{password:"",reEnteredPassword:""}}),{handleSubmit:m,control:n,formState:{isSubmitting:a,isValid:c}}=l;async function u(e){try{const r=e.password,P=o==null?void 0:o.accounts.create();t(P)}catch(r){n.setError("reEnteredPassword",{message:`${r} There was an error while creating the account`})}}return s.jsxs(D,{...l,children:[s.jsx(F,{}),s.jsx("form",{className:"w-full",onSubmit:m(u),children:s.jsxs(g,{children:[s.jsx(y,{children:s.jsx(A,{children:"Create new account"})}),s.jsxs(v,{className:"space-y-8",children:[s.jsx(p,{control:n,name:"password",render:({field:e})=>s.jsxs(j,{children:[s.jsx(w,{children:s.jsx(f,{...e,"aria-label":e.name,disabled:a,placeholder:"Password",type:"password"})}),s.jsx(C,{children:"Enter a password"}),s.jsx(S,{})]})}),s.jsx(p,{control:n,name:"reEnteredPassword",render:({field:e})=>s.jsxs(j,{children:[s.jsx(w,{children:s.jsx(f,{...e,"aria-label":e.name,disabled:a,placeholder:"Re-enter the password",type:"password"})}),s.jsx(C,{children:"Re-enter the password"}),s.jsx(S,{})]})})]}),s.jsx(E,{children:s.jsxs(x,{disabled:a||!c,className:"w-full",type:"submit",children:[a?s.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(B,{className:"mr-2 h-4 w-4"}),a?"Creating account":"Create account"]})})]})})]})}),J=({account:t})=>{const i=(t==null?void 0:t.address)??"",{prefix:o,addressSplit:l}=L.getSplitAddress(i),m=l.join(" "),[n,a]=d.useState(!1),[c,u]=d.useState();d.useEffect(()=>()=>{c&&clearTimeout(c)},[c]);const e=()=>{a(!0),navigator.clipboard.writeText(i);const r=setTimeout(()=>{a(!1)},1e3);u(r)};return s.jsxs(g,{className:"w-full",children:[s.jsx(y,{children:s.jsx(A,{children:"Account created"})}),s.jsx(v,{className:"space-y-8",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{children:"Account public address:"}),s.jsx("div",{className:"font-bold text-secondary",children:`${o} ${m}`}),s.jsx("div",{children:"You can share this account public address with anyone. Others need it to interact with you."})]})}),s.jsxs(E,{className:"gap-4",children:[s.jsxs(x,{className:"w-full",type:"button",variant:"outline",onClick:e,children:[s.jsx(O,{className:"mr-2 h-4 w-4"}),n?"Copied":"Copy"]}),s.jsx(T,{className:"w-full",to:_.HOME,state:{shouldStartFresh:!0},children:s.jsxs(x,{className:"w-full",type:"button",children:[s.jsx(V,{className:"mr-2 h-4 w-4"}),"Done"]})})]})]})},U=M(d.lazy(()=>R(()=>import("./MnemonicDisplay.js"),__vite__mapDeps([0,1,2,3,4,5,6])))),Z=b(()=>{const{zondStore:t}=N(),{setActiveAccount:i}=t,[o,l]=d.useState(),[m,n]=d.useState(!1),[a,c]=d.useState(!1),u=r=>{window.scrollTo(0,0),r&&(l(r),i(r==null?void 0:r.address),n(!0))},e=()=>{window.scrollTo(0,0),c(!0)};return s.jsxs(s.Fragment,{children:[s.jsx("img",{className:"fixed z-0 h-96 w-96 -translate-x-8 animate-rotate-scale overflow-hidden opacity-30",src:"tree.svg"}),s.jsx("div",{className:"relative z-10 p-8",children:m?a?s.jsx(J,{account:o}):s.jsx(U,{account:o,onMnemonicNoted:e}):s.jsx($,{onAccountCreated:u})})]})});export{Z as default};
