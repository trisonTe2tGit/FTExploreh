import{r as x,j as e,L as v,R as y,z as w,u as T}from"./index-DdhxihET.js";import{B as j,o as F}from"./createLucideIcon-BaD5mpES.js";import{C,a as b,b as g,f as S,d as A}from"./index-Da7hFKZi.js";import{W as I,u as E,F as P,a as L,b as D,c as M,I as k,d as W,e as H,M as R,t as z}from"./MnemonicWordListing-BfUQ0gYf.js";import{C as O}from"./Label-EVIep7GS.js";import{C as U,L as V}from"./loader-zfJ_1S1-.js";import{D as B}from"./download-2SSoZA02.js";const J=n=>{if(!n)return"";const a=n.split(" "),i=a.length;if(i%2!==0)throw new Error("word count must be even");const l={};I.map((o,s)=>(l[o]=s,o));const m=new Uint8Array(i*15/10);let r=0,t=0,c=0;return a.map(o=>{const s=l[o];if(s==null)throw new Error("invalid word in mnemonic");t+=3,r=(r<<12)+s;let h,d,u;for(;t>2;)h=4*(t-2),d=(1<<h)-1,u=r>>h,t-=2,r&=d,m[c]=u,c++}),t>0&&(m[c]=r&255,c++),new TextDecoder().decode(m).replace(/\W/g,"")},_=({account:n})=>{const a=(n==null?void 0:n.address)??"",i=[];for(let s=2;s<a.length;s+=4)i.push(a.substring(s,s+4));const l=i.join(" "),[m,r]=x.useState(!1),[t,c]=x.useState();x.useEffect(()=>()=>{t&&clearTimeout(t)},[t]);const o=()=>{r(!0),navigator.clipboard.writeText(a);const s=setTimeout(()=>{r(!1)},1e3);c(s)};return e.jsxs(C,{className:"w-full",children:[e.jsx(b,{children:e.jsx(g,{children:"Account imported"})}),e.jsx(S,{className:"space-y-8",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{children:"Account public address:"}),e.jsx("div",{className:"font-bold text-secondary",children:`0x ${l}`}),e.jsx("div",{children:"Your account is successfully imported."})]})}),e.jsxs(A,{className:"gap-4",children:[e.jsxs(j,{className:"w-full",type:"button",variant:"outline",onClick:o,children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),m?"Copied":"Copy"]}),e.jsx(v,{className:"w-full",to:y.ACCOUNT_DETAILS,children:e.jsxs(j,{className:"w-full",type:"button",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Done"]})})]})]})},$=w.object({mnemonicPhrases:w.string().min(1,"Mnemonic phrases are required")}),ee=F(()=>{const[n,a]=x.useState(),[i,l]=x.useState(!1),{zondStore:m}=T(),{zondInstance:r,setActiveAccount:t}=m;async function c(f){try{const p=r==null?void 0:r.accounts.seedToAccount(J(f.mnemonicPhrases));p?(window.scrollTo(0,0),a(p),t(p.address),l(!0)):d.setError("mnemonicPhrases",{message:"Account could not be imported from the mnemonic phrases"})}catch(p){d.setError("mnemonicPhrases",{message:`There was an error while reading the mnemonic phrases. ${p}`})}}const o=E({resolver:z($),mode:"onChange",reValidateMode:"onSubmit",defaultValues:{mnemonicPhrases:""}}),{handleSubmit:s,watch:h,control:d,formState:{isSubmitting:u,isValid:N}}=o;return e.jsxs(e.Fragment,{children:[e.jsx("img",{className:"fixed z-0 h-96 w-96 -translate-x-8 scale-150 overflow-hidden opacity-30",src:"tree.svg"}),e.jsx("div",{className:"relative z-10 p-8",children:i?e.jsx(_,{account:n}):e.jsx(P,{...o,children:e.jsx("form",{className:"w-full",onSubmit:s(c),children:e.jsxs(C,{children:[e.jsx(b,{children:e.jsx(g,{children:"Import an existing account"})}),e.jsxs(S,{className:"space-y-8",children:[e.jsx(L,{control:d,name:"mnemonicPhrases",render:({field:f})=>e.jsxs(D,{children:[e.jsx(M,{children:e.jsx(k,{...f,autoComplete:"off",disabled:u,placeholder:"Mnemonic Phrases"})}),e.jsx(W,{children:"Paste the mnemonic phrases"}),e.jsx(H,{})]})}),e.jsx(R,{mnemonic:h().mnemonicPhrases})]}),e.jsx(A,{children:e.jsxs(j,{disabled:u||!N,className:"w-full",type:"submit",children:[u?e.jsx(V,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(B,{className:"mr-2 h-4 w-4"}),"Import account"]})})]})})})})]})});export{ee as default};
