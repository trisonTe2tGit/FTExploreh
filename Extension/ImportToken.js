import{c as T,o as b,a as A,u as y,j as s,C,d as S,e as w,g as F,E as z,F as M,h as I,B as v,S as B,R as D,z as N,r as g,A as E}from"./index.js";import{u as L,F as R,a as H,b as O,c as V,I as q,d as P,e as U,t as k}from"./zod.js";import{X}from"./x.js";import{D as Z}from"./download.js";import{L as G}from"./loader.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=T("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),K=b(({token:e,onCancelImport:i,contractAddress:l})=>{const m=A(),{zondStore:x}=y(),{zondConnection:o,activeAccount:h}=x,{blockchain:j}=o,{accountAddress:n}=h,p=e==null?void 0:e.name,t=e==null?void 0:e.symbol,c=e==null?void 0:e.decimals,a=e==null?void 0:e.totalSupply,r=e==null?void 0:e.balance,f=async()=>{await B.setTokenContractsList(j,n,l),m(D.HOME,{state:{hasTokensPreference:!0}})};return s.jsxs(C,{className:"w-full",children:[s.jsx(S,{children:s.jsx(w,{children:"Import token"})}),s.jsxs(F,{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx(z,{size:64}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{children:"Contract address:"}),s.jsx("div",{className:"font-bold text-secondary",children:l})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{children:"Name:"}),s.jsx("div",{className:"font-bold text-secondary",children:p})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{children:"Symbol:"}),s.jsx("div",{className:"font-bold text-secondary",children:t})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{children:"Total supply:"}),s.jsx("div",{className:"font-bold text-secondary",children:a})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{children:"Balance:"}),s.jsx("div",{className:"font-bold text-secondary",children:M((r==null?void 0:r.toString())??"0",t)})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{children:"Decimals:"}),s.jsx("div",{className:"font-bold text-secondary",children:c==null?void 0:c.toString()})]})]})]}),s.jsxs(I,{className:"gap-4",children:[s.jsxs(v,{className:"w-full",type:"button",variant:"outline",onClick:i,children:[s.jsx(X,{className:"mr-2 h-4 w-4"}),"Cancel"]}),s.jsxs(v,{className:"w-full",type:"button",onClick:f,children:[s.jsx(Z,{className:"mr-2 h-4 w-4"}),"Import"]})]})]})}),Q=N.object({contractAddress:N.string().min(1,"Contract address is required")}),es=b(()=>{const{zondStore:e}=y(),{getZrc20TokenDetails:i}=e,[l,m]=g.useState(),[x,o]=g.useState(!1);async function h(d){const u=await i(d.contractAddress);u.error?t.setError("contractAddress",{message:u.error}):(m(u.token),o(!0))}const j=()=>{f({contractAddress:""}),o(!1)},n=L({resolver:k(Q),mode:"onChange",reValidateMode:"onSubmit",defaultValues:{contractAddress:""}}),{handleSubmit:p,control:t,watch:c,formState:{isSubmitting:a,isValid:r},reset:f}=n;return s.jsxs(s.Fragment,{children:[s.jsx("img",{className:"fixed z-0 h-96 w-96 -translate-x-8 animate-rotate-scale overflow-hidden opacity-30",src:"tree.svg"}),s.jsx("div",{className:"relative z-10 p-8",children:x?s.jsx(K,{token:l,onCancelImport:j,contractAddress:c().contractAddress}):s.jsxs(R,{...n,children:[s.jsx(E,{}),s.jsx("form",{name:"importAccount","aria-label":"importAccount",className:"w-full",onSubmit:p(h),children:s.jsxs(C,{children:[s.jsx(S,{children:s.jsx(w,{children:"Import token"})}),s.jsx(F,{className:"space-y-8",children:s.jsx(H,{control:t,name:"contractAddress",render:({field:d})=>s.jsxs(O,{children:[s.jsx(V,{children:s.jsx(q,{...d,"aria-label":d.name,autoComplete:"off",disabled:a,placeholder:"Contract address"})}),s.jsx(P,{children:"Paste the token's contract address"}),s.jsx(U,{})]})})}),s.jsx(I,{children:s.jsxs(v,{disabled:a||!r,className:"w-full",type:"submit",children:[a?s.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(J,{className:"mr-2 h-4 w-4"}),a?"Fetching token details":"Fetch token details"]})})]})})]})})]})});export{es as default};
